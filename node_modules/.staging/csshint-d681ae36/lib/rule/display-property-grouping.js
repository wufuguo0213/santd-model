'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.check = undefined;

var _chalk = require('chalk');

var _chalk2 = _interopRequireDefault(_chalk);

var _postcss = require('postcss');

var _postcss2 = _interopRequireDefault(_postcss);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * 当前文件所代表的规则名称
 *
 * @const
 * @type {string}
 */
/**
 * @file display-property-grouping 的检测逻辑
 *       Certain properties shouldn't be used with certain display property values
 *       https://github.com/CSSLint/csslint/wiki/Beware-of-display-property-grouping-size
 * @author ielgnaw(wuji0223@gmail.com)
 */

var RULENAME = 'display-property-grouping';

var propertiesToCheck = {
    'display': 1,
    'float': 'none',
    'height': 1,
    'width': 1,
    'margin': 1,
    'margin-left': 1,
    'margin-right': 1,
    'margin-bottom': 1,
    'margin-top': 1,
    'padding': 1,
    'padding-left': 1,
    'padding-right': 1,
    'padding-bottom': 1,
    'padding-top': 1,
    'vertical-align': 1
};

var properties = {};

/**
 * 对 decl 的处理
 *
 * @param {Object} result postcss 转换的结果对象
 * @param {string} prop 属性名称
 * @param {string} display display 属性的值
 * @param {string} msg 错误消息要添加的部分
 */
var addWarn = function addWarn(result, prop, display, msg) {
    var decl = properties[prop];
    if (decl) {
        if (typeof propertiesToCheck[prop] !== 'string' || decl.value.toLowerCase() !== propertiesToCheck[prop]) {
            var source = decl.source;
            var line = source.start.line;
            var col = source.start.column;
            var str = '';
            var colorStr = '';
            if (msg) {
                str = msg + ' can\'t be used with display: `' + display + '`';
                colorStr = msg + ' can\'t be used with display: `' + _chalk2.default.magenta(display) + '`';
            } else {
                str = '`' + prop + '` can\'t be used with display: `' + display + '`';
                colorStr = '' + '`' + _chalk2.default.magenta(prop) + '` can\'t be used with display: `' + _chalk2.default.magenta(display) + '`';
            }

            result.warn(RULENAME, {
                node: decl,
                ruleName: RULENAME,
                line: line,
                col: col,
                message: str,
                colorMessage: colorStr
            });
            global.CSSHINT_INVALID_ALL_COUNT++;
        }
    }
};

/**
 * 具体的检测逻辑
 *
 * @param {Object} opts 参数
 * @param {*} opts.ruleVal 当前规则具体配置的值
 * @param {string} opts.fileContent 文件内容
 * @param {string} opts.filePath 文件路径
 */
var check = exports.check = _postcss2.default.plugin(RULENAME, function (opts) {
    return function (css, result) {
        if (!opts.ruleVal) {
            return;
        }

        css.walkRules(function (rule) {
            properties = {};

            rule.walkDecls(function (decl) {
                if (global.CSSHINT_INVALID_ALL_COUNT >= opts.maxError) {
                    return;
                }

                var prop = decl.prop;
                if (propertiesToCheck[prop]) {
                    properties[prop] = decl;
                }
            });

            var display = properties.display ? properties.display.value : null;
            if (!display) {
                return;
            }

            switch (display) {
                // height, width, margin-top, margin-bottom, float should not be used with inline
                case 'inline':
                    addWarn(result, 'height', display);
                    addWarn(result, 'width', display);
                    addWarn(result, 'margin', display);
                    addWarn(result, 'margin-top', display);
                    addWarn(result, 'margin-bottom', display);
                    addWarn(result, 'float', display, 'display:inline has no effect on floated elements ' + '(but may be used to fix the IE6 double-margin bug).');
                    break;
                // vertical-align should not be used with block
                case 'block':
                    addWarn(result, 'vertical-align', display);
                    break;
                // float should not be used with inline-block
                case 'inline-block':
                    addWarn(result, 'float', display);
                    break;
                // margin, float should not be used with table
                default:
                    if (display.indexOf('table-') === 0) {
                        addWarn(result, 'margin', display);
                        addWarn(result, 'margin-left', display);
                        addWarn(result, 'margin-right', display);
                        addWarn(result, 'margin-top', display);
                        addWarn(result, 'margin-bottom', display);
                        addWarn(result, 'float', display);
                    }
            }
        });
    };
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ydWxlL2Rpc3BsYXktcHJvcGVydHktZ3JvdXBpbmcuanMiXSwibmFtZXMiOlsiUlVMRU5BTUUiLCJwcm9wZXJ0aWVzVG9DaGVjayIsInByb3BlcnRpZXMiLCJhZGRXYXJuIiwicmVzdWx0IiwicHJvcCIsImRpc3BsYXkiLCJtc2ciLCJkZWNsIiwidmFsdWUiLCJ0b0xvd2VyQ2FzZSIsInNvdXJjZSIsImxpbmUiLCJzdGFydCIsImNvbCIsImNvbHVtbiIsInN0ciIsImNvbG9yU3RyIiwiY2hhbGsiLCJtYWdlbnRhIiwid2FybiIsIm5vZGUiLCJydWxlTmFtZSIsIm1lc3NhZ2UiLCJjb2xvck1lc3NhZ2UiLCJnbG9iYWwiLCJDU1NISU5UX0lOVkFMSURfQUxMX0NPVU5UIiwiY2hlY2siLCJwb3N0Y3NzIiwicGx1Z2luIiwiY3NzIiwib3B0cyIsInJ1bGVWYWwiLCJ3YWxrUnVsZXMiLCJydWxlIiwid2Fsa0RlY2xzIiwibWF4RXJyb3IiLCJpbmRleE9mIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBT0E7Ozs7QUFDQTs7Ozs7O0FBRUE7Ozs7OztBQVZBOzs7Ozs7O0FBZ0JBLElBQU1BLFdBQVcsMkJBQWpCOztBQUVBLElBQU1DLG9CQUFvQjtBQUN0QixlQUFXLENBRFc7QUFFdEIsYUFBUyxNQUZhO0FBR3RCLGNBQVUsQ0FIWTtBQUl0QixhQUFTLENBSmE7QUFLdEIsY0FBVSxDQUxZO0FBTXRCLG1CQUFlLENBTk87QUFPdEIsb0JBQWdCLENBUE07QUFRdEIscUJBQWlCLENBUks7QUFTdEIsa0JBQWMsQ0FUUTtBQVV0QixlQUFXLENBVlc7QUFXdEIsb0JBQWdCLENBWE07QUFZdEIscUJBQWlCLENBWks7QUFhdEIsc0JBQWtCLENBYkk7QUFjdEIsbUJBQWUsQ0FkTztBQWV0QixzQkFBa0I7QUFmSSxDQUExQjs7QUFrQkEsSUFBSUMsYUFBYSxFQUFqQjs7QUFFQTs7Ozs7Ozs7QUFRQSxJQUFNQyxVQUFVLFNBQVZBLE9BQVUsQ0FBQ0MsTUFBRCxFQUFT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QSxxQkFBSyxjQUFMO0FBQ0lILDRCQUFRQyxNQUFSLEVBQWdCLE9BQWhCLEVBQXlCRSxPQUF6QjtBQUNBO0FBQ0o7QUFDQTtBQUNJLHdCQUFJQSxRQUFRK0IsT0FBUixDQUFnQixRQUFoQixNQUE4QixDQUFsQyxFQUFxQztBQUNqQ2xDLGdDQUFRQyxNQUFSLEVBQWdCLFFBQWhCLEVBQTBCRSxPQUExQjtBQUNBSCxnQ0FBUUMsTUFBUixFQUFnQixhQUFoQixFQUErQkUsT0FBL0I7QUFDQUgsZ0NBQVFDLE1BQVIsRUFBZ0IsY0FBaEIsRUFBZ0NFLE9BQWhDO0FBQ0FILGdDQUFRQyxNQUFSLEVBQWdCLFlBQWhCLEVBQThCRSxPQUE5QjtBQUNBSCxnQ0FBUUMsTUFBUixFQUFnQixlQUFoQixFQUFpQ0UsT0FBakM7QUFDQUgsZ0NBQVFDLE1BQVIsRUFBZ0IsT0FBaEIsRUFBeUJFLE9BQXpCO0FBQ0g7QUE5QlQ7QUFnQ0gsU0FuREQ7QUFvREgsS0ExRHlDO0FBQUEsQ0FBekIsQ0FBZCIsImZpbGUiOiJkaXNwbGF5LXByb3BlcnR5LWdyb3VwaW5nLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZSBkaXNwbGF5LXByb3BlcnR5LWdyb3VwaW5nIOeahOajgOa1i+mAu+i+kVxuICogICAgICAgQ2VydGFpbiBwcm9wZXJ0aWVzIHNob3VsZG4ndCBiZSB1c2VkIHdpdGggY2VydGFpbiBkaXNwbGF5IHByb3BlcnR5IHZhbHVlc1xuICogICAgICAgaHR0cHM6Ly9naXRodWIuY29tL0NTU0xpbnQvY3NzbGludC93aWtpL0Jld2FyZS1vZi1kaXNwbGF5LXByb3BlcnR5LWdyb3VwaW5nLXNpemVcbiAqIEBhdXRob3IgaWVsZ25hdyh3dWppMDIyM0BnbWFpbC5jb20pXG4gKi9cblxuaW1wb3J0IGNoYWxrIGZyb20gJ2NoYWxrJztcbmltcG9ydCBwb3N0Y3NzIGZyb20gJ3Bvc3Rjc3MnO1xuXG4vKipcbiAqIOW9k+WJjeaWh+S7tuaJgOS7o+ihqOeahOinhOWImeWQjeensFxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuY29uc3QgUlVMRU5BTUUgPSAnZGlzcGxheS1wcm9wZXJ0eS1ncm91cGluZyc7XG5cbmNvbnN0IHByb3BlcnRpZXNUb0NoZWNrID0ge1xuICAgICdkaXNwbGF5JzogMSxcbiAgICAnZmxvYXQnOiAnbm9uZScsXG4gICAgJ2hlaWdodCc6IDEsXG4gICAgJ3dpZHRoJzogMSxcbiAgICAnbWFyZ2luJzogMSxcbiAgICAnbWFyZ2luLWxlZnQnOiAxLFxuICAgICdtYXJnaW4tcmlnaHQnOiAxLFxuICAgICdtYXJnaW4tYm90dG9tJzogMSxcbiAgICAnbWFyZ2luLXRvcCc6IDEsXG4gICAgJ3BhZGRpbmcnOiAxLFxuICAgICdwYWRkaW5nLWxlZnQnOiAxLFxuICAgICdwYWRkaW5nLXJpZ2h0JzogMSxcbiAgICAncGFkZGluZy1ib3R0b20nOiAxLFxuICAgICdwYWRkaW5nLXRvcCc6IDEsXG4gICAgJ3ZlcnRpY2FsLWFsaWduJzogMVxufTtcblxubGV0IHByb3BlcnRpZXMgPSB7fTtcblxuLyoqXG4gKiDlr7kgZGVjbCDnmoTlpITnkIZcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzdWx0IHBvc3Rjc3Mg6L2s5o2i55qE57uT5p6c5a+56LGhXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcCDlsZ7mgKflkI3np7BcbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwbGF5IGRpc3BsYXkg5bGe5oCn55qE5YC8XG4gKiBAcGFyYW0ge3N0cmluZ30gbXNnIOmUmeivr+a2iOaBr+imgea3u+WKoOeahOmDqOWIhlxuICovXG5jb25zdCBhZGRXYXJuID0gKHJlc3VsdCwgcHJvcCwgZGlzcGxheSwgbXNnKSA9PiB7XG4gICAgY29uc3QgZGVjbCA9IHByb3BlcnRpZXNbcHJvcF07XG4gICAgaWYgKGRlY2wpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9wZXJ0aWVzVG9DaGVja1twcm9wXSAhPT0gJ3N0cmluZydcbiAgICAgICAgICAgIHx8IGRlY2wudmFsdWUudG9Mb3dlckNhc2UoKSAhPT0gcHJvcGVydGllc1RvQ2hlY2tbcHJvcF1cbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBkZWNsLnNvdXJjZTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBzb3VyY2Uuc3RhcnQubGluZTtcbiAgICAgICAgICAgIGNvbnN0IGNvbCA9IHNvdXJjZS5zdGFydC5jb2x1bW47XG4gICAgICAgICAgICBsZXQgc3RyID0gJyc7XG4gICAgICAgICAgICBsZXQgY29sb3JTdHIgPSAnJztcbiAgICAgICAgICAgIGlmIChtc2cpIHtcbiAgICAgICAgICAgICAgICBzdHIgPSBtc2cgKyAnIGNhblxcJ3QgYmUgdXNlZCB3aXRoIGRpc3BsYXk6IGAnICsgZGlzcGxheSArICdgJztcbiAgICAgICAgICAgICAgICBjb2xvclN0ciA9IG1zZyArICcgY2FuXFwndCBiZSB1c2VkIHdpdGggZGlzcGxheTogYCcgKyBjaGFsay5tYWdlbnRhKGRpc3BsYXkpICsgJ2AnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RyID0gJ2AnICsgcHJvcCArICdgIGNhblxcJ3QgYmUgdXNlZCB3aXRoIGRpc3BsYXk6IGAnICsgZGlzcGxheSArICdgJztcbiAgICAgICAgICAgICAgICBjb2xvclN0ciA9ICcnXG4gICAgICAgICAgICAgICAgICAgICsgJ2AnXG4gICAgICAgICAgICAgICAgICAgICsgY2hhbGsubWFnZW50YShwcm9wKVxuICAgICAgICAgICAgICAgICAgICArICdgIGNhblxcJ3QgYmUgdXNlZCB3aXRoIGRpc3BsYXk6IGAnXG4gICAgICAgICAgICAgICAgICAgICsgY2hhbGsubWFnZW50YShkaXNwbGF5KSArICdgJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzdWx0Lndhcm4oUlVMRU5BTUUsIHtcbiAgICAgICAgICAgICAgICBub2RlOiBkZWNsLFxuICAgICAgICAgICAgICAgIHJ1bGVOYW1lOiBSVUxFTkFNRSxcbiAgICAgICAgICAgICAgICBsaW5lOiBsaW5lLFxuICAgICAgICAgICAgICAgIGNvbDogY29sLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHN0cixcbiAgICAgICAgICAgICAgICBjb2xvck1lc3NhZ2U6IGNvbG9yU3RyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGdsb2JhbC5DU1NISU5UX0lOVkFMSURfQUxMX0NPVU5UKys7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vKipcbiAqIOWFt+S9k+eahOajgOa1i+mAu+i+kVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIOWPguaVsFxuICogQHBhcmFtIHsqfSBvcHRzLnJ1bGVWYWwg5b2T5YmN6KeE5YiZ5YW35L2T6YWN572u55qE5YC8XG4gKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5maWxlQ29udGVudCDmlofku7blhoXlrrlcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLmZpbGVQYXRoIOaWh+S7tui3r+W+hFxuICovXG5leHBvcnQgY29uc3QgY2hlY2sgPSBwb3N0Y3NzLnBsdWdpbihSVUxFTkFNRSwgb3B0cyA9PlxuICAgIChjc3MsIHJlc3VsdCkgPT4ge1xuICAgICAgICBpZiAoIW9wdHMucnVsZVZhbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY3NzLndhbGtSdWxlcyhydWxlID0+IHtcbiAgICAgICAgICAgIHByb3BlcnRpZXMgPSB7fTtcblxuICAgICAgICAgICAgcnVsZS53YWxrRGVjbHMoZGVjbCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGdsb2JhbC5DU1NISU5UX0lOVkFMSURfQUxMX0NPVU5UID49IG9wdHMubWF4RXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHByb3AgPSBkZWNsLnByb3A7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNUb0NoZWNrW3Byb3BdKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXNbcHJvcF0gPSBkZWNsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBkaXNwbGF5ID0gcHJvcGVydGllcy5kaXNwbGF5ID8gcHJvcGVydGllcy5kaXNwbGF5LnZhbHVlIDogbnVsbDtcbiAgICAgICAgICAgIGlmICghZGlzcGxheSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3dpdGNoIChkaXNwbGF5KSB7XG4gICAgICAgICAgICAgICAgLy8gaGVpZ2h0LCB3aWR0aCwgbWFyZ2luLXRvcCwgbWFyZ2luLWJvdHRvbSwgZmxvYXQgc2hvdWxkIG5vdCBiZSB1c2VkIHdpdGggaW5saW5lXG4gICAgICAgICAgICAgICAgY2FzZSAnaW5saW5lJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkV2FybihyZXN1bHQsICdoZWlnaHQnLCBkaXNwbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkV2FybihyZXN1bHQsICd3aWR0aCcsIGRpc3BsYXkpO1xuICAgICAgICAgICAgICAgICAgICBhZGRXYXJuKHJlc3VsdCwgJ21hcmdpbicsIGRpc3BsYXkpO1xuICAgICAgICAgICAgICAgICAgICBhZGRXYXJuKHJlc3VsdCwgJ21hcmdpbi10b3AnLCBkaXNwbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkV2FybihyZXN1bHQsICdtYXJnaW4tYm90dG9tJywgZGlzcGxheSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZFdhcm4ocmVzdWx0LCAnZmxvYXQnLCBkaXNwbGF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2Rpc3BsYXk6aW5saW5lIGhhcyBubyBlZmZlY3Qgb24gZmxvYXRlZCBlbGVtZW50cyAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAnKGJ1dCBtYXkgYmUgdXNlZCB0byBmaXggdGhlIElFNiBkb3VibGUtbWFyZ2luIGJ1ZykuJ1xuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAvLyB2ZXJ0aWNhbC1hbGlnbiBzaG91bGQgbm90IGJlIHVzZWQgd2l0aCBibG9ja1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Jsb2NrJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkV2FybihyZXN1bHQsICd2ZXJ0aWNhbC1hbGlnbicsIGRpc3BsYXkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAvLyBmbG9hdCBzaG91bGQgbm90IGJlIHVzZWQgd2l0aCBpbmxpbmUtYmxvY2tcbiAgICAgICAgICAgICAgICBjYXNlICdpbmxpbmUtYmxvY2snOlxuICAgICAgICAgICAgICAgICAgICBhZGRXYXJuKHJlc3VsdCwgJ2Zsb2F0JywgZGlzcGxheSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIC8vIG1hcmdpbiwgZmxvYXQgc2hvdWxkIG5vdCBiZSB1c2VkIHdpdGggdGFibGVcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlzcGxheS5pbmRleE9mKCd0YWJsZS0nKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkV2FybihyZXN1bHQsICdtYXJnaW4nLCBkaXNwbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFdhcm4ocmVzdWx0LCAnbWFyZ2luLWxlZnQnLCBkaXNwbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFdhcm4ocmVzdWx0LCAnbWFyZ2luLXJpZ2h0JywgZGlzcGxheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRXYXJuKHJlc3VsdCwgJ21hcmdpbi10b3AnLCBkaXNwbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFdhcm4ocmVzdWx0LCAnbWFyZ2luLWJvdHRvbScsIGRpc3BsYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkV2FybihyZXN1bHQsICdmbG9hdCcsIGRpc3BsYXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbik7XG4iXX0=